<html>
<head>
    <title>Order {{ order.id }}</title>
    <script src="https://js.stripe.com/v3/"></script>
</head>
<body>

<h1>Order #{{ order.id }}</h1>

<ul>
{% for item in items %}
    <li>{{ item.name }} â€” {{ item.price }}</li>
{% endfor %}
</ul>

<p><strong>Total: {{ total }}</strong></p>

<button id="buy-button">Buy</button>
<br><br>
<a href="/"> menu </a>
<script>
const stripe = Stripe("{{ public_key }}")

document.getElementById("buy-button").addEventListener("click", function () {
    fetch("/order/buy/{{ order.id }}/")
        .then(r => r.json())
        .then(data => {
            stripe.redirectToCheckout({ sessionId: data.id })
        })
})
</script>

</body>
</html>